{
  "name": "Assistente Completo - Atendimento e Agendamento",
  "description": "Workflow completo com loop de informa√ß√µes e fluxo de agendamento - Todas as mensagens configuradas com placeholders din√¢micos",
  "isActive": false,
  "type": "CONSULTATION",
  "nodes": [
    {
      "id": "start",
      "type": "START",
      "position": { "x": 400, "y": 50 },
      "data": {
        "welcomeMessage": "Ol√°! Bem-vindo √†s nossas cl√≠nicas! üè•\n\nTemos duas unidades:\n\n1Ô∏è‚É£ Unidade Vieiralves\nüìç Rua Rio I√ß√°, 850 ‚Äî Nossa Sra. das Gra√ßas\n\n2Ô∏è‚É£ Unidade S√£o Jos√©\nüìç Av. Autaz Mirim, 5773 ‚Äî S√£o Jos√© Oper√°rio\n\nEm qual voc√™ gostaria de ser atendido(a)?\nResponda com 1 ou 2."
      }
    },
    {
      "id": "clinic_selection",
      "type": "CONDITION",
      "position": { "x": 400, "y": 180 },
      "data": {
        "condition": "clinic_selection"
      }
    },
    {
      "id": "unidade_vieiralves",
      "type": "MESSAGE",
      "position": { "x": 200, "y": 300 },
      "data": {
        "message": "‚úÖ Voc√™ escolheu a Unidade Vieiralves!\n\nüè• Unidade Vieiralves\nüìç ${endereco}\nüó∫Ô∏è Maps: ${maps_url}\nüìû ${telefone}\n‚è∞ ${horario_atendimento}\n\nComo posso ajudar voc√™ hoje?\n\nVoc√™ pode:\nüí∞ Saber sobre valores\nüè• Ver conv√™nios atendidos\nüìç Localiza√ß√£o e hor√°rios\nüìù Explica√ß√£o sobre procedimentos\nüìÖ Agendar consulta"
      }
    },
    {
      "id": "unidade_sao_jose",
      "type": "MESSAGE",
      "position": { "x": 600, "y": 300 },
      "data": {
        "message": "‚úÖ Voc√™ escolheu a Unidade S√£o Jos√©!\n\nüè• Unidade S√£o Jos√©\nüìç ${endereco}\nüó∫Ô∏è Maps: ${maps_url}\nüìû ${telefone}\n‚è∞ ${horario_atendimento}\n\nComo posso ajudar voc√™ hoje?\n\nVoc√™ pode:\nüí∞ Saber sobre valores\nüè• Ver conv√™nios atendidos\nüìç Localiza√ß√£o e hor√°rios\nüìù Explica√ß√£o sobre procedimentos\nüìÖ Agendar consulta"
      }
    },
    {
      "id": "gpt_classifier",
      "type": "GPT_RESPONSE",
      "position": { "x": 400, "y": 450 },
      "data": {
        "systemPrompt": "Voc√™ √© um classificador de inten√ß√£o para cl√≠nica de fisioterapia. Analise a mensagem do usu√°rio e classifique em UMA das op√ß√µes:\n\n1) VALORES - perguntas sobre pre√ßos, valores particulares, pacotes\n2) CONV√äNIOS - perguntas sobre conv√™nios aceitos, planos de sa√∫de, cobertura\n3) LOCALIZA√á√ÉO - perguntas sobre endere√ßo, como chegar, hor√°rios, contato\n4) PROCEDIMENTO - perguntas sobre o que √© um procedimento, benef√≠cios, dura√ß√£o, indica√ß√µes\n5) AGENDAR - desejo de marcar consulta, agendar, marcar hor√°rio\n6) ATENDENTE - pedido para falar com humano, atendente, pessoa\n\nResponda APENAS com o n√∫mero (1-6)."
      }
    },
    {
      "id": "branch_valores",
      "type": "CONDITION",
      "position": { "x": -200, "y": 620 },
      "data": {
        "condition": "fisioterapia|ortop√©dica|ortopedica|p√©lvica|pelvica|neurol√≥gica|neurologica|respirat√≥ria|respiratoria|acupuntura|rpg|pilates|quiropraxia|consulta|ortopedista"
      }
    },
    {
      "id": "valor_fisio_ortopedica",
      "type": "MESSAGE",
      "position": { "x": -400, "y": 750 },
      "data": {
        "message": "üèÉ‚Äç‚ôÄÔ∏è Fisioterapia Ortop√©dica - ${unidade_nome}\n\nüí∞ Valores:\n‚Ä¢ Particular: R$ 90,00/sess√£o\n‚Ä¢ Bradesco/SulAm√©rica: R$ 85,00/sess√£o\n‚Ä¢ Outros conv√™nios com desconto: R$ 75,00/sess√£o\n\nüì¶ Pacote 10 sess√µes: valor especial!\n‚è±Ô∏è Dura√ß√£o: 45 minutos\n\n‚ÑπÔ∏è Indicado para: reabilita√ß√£o p√≥s-cirurgia, les√µes esportivas, dores musculares, problemas articulares\n\nPosso ajudar com mais alguma informa√ß√£o?"
      }
    },
    {
      "id": "valor_fisio_pelvica",
      "type": "MESSAGE",
      "position": { "x": -200, "y": 750 },
      "data": {
        "message": "üå∏ Fisioterapia P√©lvica - ${unidade_nome}\n\n‚ö†Ô∏è Dispon√≠vel apenas na Unidade Vieiralves\n\nüí∞ Valores:\n‚Ä¢ Particular: R$ 95,00/sess√£o\n‚Ä¢ Avalia√ß√£o obrigat√≥ria: R$ 220,00\n‚Ä¢ Conv√™nios: R$ 85-90,00/sess√£o\n\nüì¶ Pacote 10 sess√µes com desconto!\n‚è±Ô∏è Dura√ß√£o: 50 minutos\n\n‚ÑπÔ∏è Indicado para: incontin√™ncia urin√°ria, p√≥s-parto, disfun√ß√µes sexuais, prepara√ß√£o para o parto\n\n‚ö†Ô∏è Requer avalia√ß√£o pr√©via obrigat√≥ria\n\nPosso ajudar com mais alguma informa√ß√£o?"
      }
    },
    {
      "id": "valor_fisio_neurologica",
      "type": "MESSAGE",
      "position": { "x": 0, "y": 750 },
      "data": {
        "message": "üß† Fisioterapia Neurol√≥gica - ${unidade_nome}\n\nüí∞ Valores:\n‚Ä¢ Particular: R$ 95,00/sess√£o\n‚Ä¢ Conv√™nios: R$ 80-90,00/sess√£o\n\nüì¶ Pacote 10 sess√µes dispon√≠vel!\n‚è±Ô∏è Dura√ß√£o: 50 minutos\n\n‚ÑπÔ∏è Indicado para: AVC, Parkinson, paralisia cerebral, esclerose m√∫ltipla, neuropatias\n\nPosso ajudar com mais alguma informa√ß√£o?"
      }
    },
    {
      "id": "valor_acupuntura",
      "type": "MESSAGE",
      "position": { "x": 200, "y": 750 },
      "data": {
        "message": "üíâ Acupuntura - ${unidade_nome}\n\nüí∞ Valores:\n‚Ä¢ Particular: R$ 180,00/sess√£o\n‚Ä¢ Avalia√ß√£o: R$ 200,00 (obrigat√≥ria primeira vez)\n‚Ä¢ Conv√™nios: R$ 140-160,00/sess√£o\n\nüì¶ Pacote 10 sess√µes: desconto especial incluindo avalia√ß√£o!\n‚è±Ô∏è Dura√ß√£o: 45 minutos\n\n‚ÑπÔ∏è Indicado para: dores cr√¥nicas, enxaqueca, ansiedade, ins√¥nia, stress\n\n‚ö†Ô∏è Requer avalia√ß√£o pr√©via obrigat√≥ria\n\nPosso ajudar com mais alguma informa√ß√£o?"
      }
    },
    {
      "id": "valor_rpg",
      "type": "MESSAGE",
      "position": { "x": 400, "y": 750 },
      "data": {
        "message": "üßò RPG (Reeduca√ß√£o Postural Global) - ${unidade_nome}\n\nüí∞ Valores:\n‚Ä¢ Particular: R$ 100,00/sess√£o\n‚Ä¢ Conv√™nios: R$ 85-95,00/sess√£o\n\nüì¶ Pacote 10 sess√µes dispon√≠vel!\n‚è±Ô∏è Dura√ß√£o: 50 minutos\n\n‚ÑπÔ∏è Indicado para: corre√ß√£o postural, h√©rnias de disco, escoliose, dores na coluna\n\nPosso ajudar com mais alguma informa√ß√£o?"
      }
    },
    {
      "id": "valor_pilates",
      "type": "MESSAGE",
      "position": { "x": 600, "y": 750 },
      "data": {
        "message": "ü§∏ Pilates - ${unidade_nome}\n\n‚ö†Ô∏è Dispon√≠vel apenas na Unidade Vieiralves\n\nüí∞ Valores:\n‚Ä¢ Particular: R$ 110,00/sess√£o\n‚Ä¢ Pilates Solo (grupo): R$ 80,00/sess√£o\n\nüì¶ Pacotes mensais dispon√≠veis!\n‚è±Ô∏è Dura√ß√£o: 50 minutos (individual) ou 60 minutos (grupo)\n\n‚ÑπÔ∏è Indicado para: fortalecimento, flexibilidade, reabilita√ß√£o, condicionamento f√≠sico\n\nPosso ajudar com mais alguma informa√ß√£o?"
      }
    },
    {
      "id": "valor_quiropraxia",
      "type": "MESSAGE",
      "position": { "x": 800, "y": 750 },
      "data": {
        "message": "üíÜ Quiropraxia - ${unidade_nome}\n\n‚ö†Ô∏è Dispon√≠vel apenas na Unidade Vieiralves\n\nüí∞ Valores:\n‚Ä¢ Particular: R$ 130,00/sess√£o\n‚Ä¢ Avalia√ß√£o: R$ 150,00 (primeira vez)\n\nüì¶ Pacote 10 sess√µes com desconto!\n‚è±Ô∏è Dura√ß√£o: 40 minutos\n\n‚ÑπÔ∏è Indicado para: dores na coluna, h√©rnias, cervicalgia, lombalgia, torcicolo\n\nPosso ajudar com mais alguma informa√ß√£o?"
      }
    },
    {
      "id": "valor_consulta",
      "type": "MESSAGE",
      "position": { "x": 1000, "y": 750 },
      "data": {
        "message": "üë®‚Äç‚öïÔ∏è Consulta com Ortopedista - ${unidade_nome}\n\nüí∞ Valores:\n‚Ä¢ Particular: R$ 250,00\n‚Ä¢ Conv√™nios: conforme tabela do conv√™nio\n\n‚è±Ô∏è Dura√ß√£o: 30-40 minutos\n\n‚ÑπÔ∏è Atendimento especializado para diagn√≥stico e tratamento de problemas ortop√©dicos\n\nPosso ajudar com mais alguma informa√ß√£o?"
      }
    },
    {
      "id": "info_convenios",
      "type": "MESSAGE",
      "position": { "x": 100, "y": 620 },
      "data": {
        "message": "üè• Conv√™nios Atendidos - ${unidade_nome}\n\n‚úÖ Atendemos os seguintes conv√™nios:\n\nüîµ Principais:\n‚Ä¢ Bradesco Sa√∫de\n‚Ä¢ SulAm√©rica\n‚Ä¢ Mediservice\n‚Ä¢ Sa√∫de Caixa\n‚Ä¢ Petrobras (Geap Autogest√£o)\n\nüîµ Outros conv√™nios:\n‚Ä¢ Pro Social\n‚Ä¢ Postal Sa√∫de\n‚Ä¢ GEAP\n‚Ä¢ Conab\n‚Ä¢ AFFEAM\n‚Ä¢ AMBEP\n‚Ä¢ Gama Sa√∫de\n‚Ä¢ Life Empresarial\n‚Ä¢ NotreDame Interm√©dica\n‚Ä¢ OAB Sa√∫de\n‚Ä¢ ADEPOL\n‚Ä¢ Bemol Sa√∫de\n‚Ä¢ E muitos outros!\n\nüí° Quer saber quais procedimentos seu conv√™nio cobre?\nMe diga o nome do seu conv√™nio!"
      }
    },
    {
      "id": "ask_convenio_procedimentos",
      "type": "CONDITION",
      "position": { "x": 100, "y": 770 },
      "data": {
        "condition": "bradesco|sulamerica|mediservice|saude caixa|petrobras|geap|pro social|postal|conab|affeam|ambep|gama|life|notredame|oab|adepol|bemol"
      }
    },
    {
      "id": "convenio_bradesco",
      "type": "MESSAGE",
      "position": { "x": -100, "y": 900 },
      "data": {
        "message": "üîµ Bradesco Sa√∫de - ${unidade_nome}\n\n‚úÖ Procedimentos cobertos:\n\n‚Ä¢ Acupuntura\n‚Ä¢ Consulta com Ortopedista\n‚Ä¢ Fisioterapia Neurol√≥gica\n‚Ä¢ Fisioterapia Ortop√©dica\n‚Ä¢ Fisioterapia P√©lvica (s√≥ Vieiralves)\n‚Ä¢ Infiltra√ß√£o de ponto gatilho e Agulhamento a seco\n‚Ä¢ RPG (Reeduca√ß√£o Postural Global)\n\nüí∞ Valores: conforme tabela do conv√™nio (geralmente entre R$ 85-140)\n\nPosso ajudar com mais alguma informa√ß√£o?"
      }
    },
    {
      "id": "convenio_sulamerica",
      "type": "MESSAGE",
      "position": { "x": 100, "y": 900 },
      "data": {
        "message": "üîµ SulAm√©rica Sa√∫de - ${unidade_nome}\n\n‚úÖ Procedimentos cobertos:\n\n‚Ä¢ Acupuntura\n‚Ä¢ Estimula√ß√£o El√©trica Transcut√¢nea (TENS)\n‚Ä¢ Fisioterapia Neurol√≥gica\n‚Ä¢ Fisioterapia Ortop√©dica\n‚Ä¢ Fisioterapia P√©lvica (s√≥ Vieiralves)\n\nüí∞ Valores: conforme tabela do conv√™nio (geralmente entre R$ 80-140)\n\nPosso ajudar com mais alguma informa√ß√£o?"
      }
    },
    {
      "id": "convenio_outros",
      "type": "MESSAGE",
      "position": { "x": 300, "y": 900 },
      "data": {
        "message": "üè• ${convenio_x} - ${unidade_nome}\n\n‚úÖ Principais procedimentos cobertos:\n\n‚Ä¢ ${procedimento_1}\n‚Ä¢ ${procedimento_2}\n‚Ä¢ ${procedimento_3}\n\nüí∞ Valores: conforme tabela do conv√™nio\n\nüí° Para informa√ß√µes mais detalhadas sobre cobertura e valores espec√≠ficos, entre em contato com nossa recep√ß√£o:\nüìû ${telefone}\n\nPosso ajudar com mais alguma informa√ß√£o?"
      }
    },
    {
      "id": "info_localizacao",
      "type": "MESSAGE",
      "position": { "x": 400, "y": 620 },
      "data": {
        "message": "üìç Localiza√ß√£o - ${unidade_nome}\n\nüè• ${unidade_nome}\nüìç Endere√ßo: ${endereco}\nüó∫Ô∏è Google Maps: ${maps_url}\n\nüìû Contato:\nTelefone: ${telefone}\n\n‚è∞ Hor√°rio de Atendimento:\n${horario_atendimento}\n\nüöó Informa√ß√µes de acesso:\n‚úÖ Estacionamento dispon√≠vel\n‚úÖ Acessibilidade para cadeirantes\n‚úÖ Recep√ß√£o climatizada\n\nPosso ajudar com mais alguma informa√ß√£o?"
      }
    },
    {
      "id": "info_procedimento_explicacao",
      "type": "CONDITION",
      "position": { "x": 700, "y": 620 },
      "data": {
        "condition": "fisioterapia|acupuntura|rpg|pilates|quiropraxia|ortopedista|pelvica|neurologica|ortopedica|respiratoria"
      }
    },
    {
      "id": "explicacao_fisio_ortopedica",
      "type": "MESSAGE",
      "position": { "x": 600, "y": 770 },
      "data": {
        "message": "üèÉ‚Äç‚ôÄÔ∏è **Fisioterapia Ortop√©dica**\n\nüìñ **O que √©:**\nTratamento especializado para problemas do sistema musculoesquel√©tico (ossos, m√∫sculos, articula√ß√µes e ligamentos).\n\n‚ú® **Benef√≠cios:**\n‚Ä¢ Redu√ß√£o de dores musculares e articulares\n‚Ä¢ Recupera√ß√£o de movimentos\n‚Ä¢ Reabilita√ß√£o p√≥s-cir√∫rgica\n‚Ä¢ Melhora da for√ßa e flexibilidade\n‚Ä¢ Preven√ß√£o de les√µes\n\nüéØ **Indicado para:**\n‚Ä¢ Dores na coluna\n‚Ä¢ Les√µes esportivas\n‚Ä¢ P√≥s-operat√≥rio ortop√©dico\n‚Ä¢ Tendinites e bursites\n‚Ä¢ Artrose\n\nüí∞ **Valores:**\n‚Ä¢ Particular: R$ 90,00/sess√£o\n‚Ä¢ Conv√™nios: R$ 75-85,00/sess√£o\n‚Ä¢ Pacote 10 sess√µes com desconto\n\n‚è±Ô∏è Dura√ß√£o: 45 minutos\n\nüìÖ Quer agendar?"
      }
    },
    {
      "id": "explicacao_acupuntura",
      "type": "MESSAGE",
      "position": { "x": 800, "y": 770 },
      "data": {
        "message": "üíâ **Acupuntura**\n\nüìñ **O que √©:**\nT√©cnica milenar da medicina chinesa que utiliza agulhas finas em pontos espec√≠ficos do corpo para equilibrar a energia vital.\n\n‚ú® **Benef√≠cios:**\n‚Ä¢ Al√≠vio de dores cr√¥nicas\n‚Ä¢ Redu√ß√£o de enxaquecas\n‚Ä¢ Tratamento de ansiedade e stress\n‚Ä¢ Melhora do sono\n‚Ä¢ Equil√≠brio emocional\n‚Ä¢ Fortalecimento do sistema imunol√≥gico\n\nüéØ **Indicado para:**\n‚Ä¢ Dores de cabe√ßa e enxaqueca\n‚Ä¢ Dores musculares cr√¥nicas\n‚Ä¢ Ins√¥nia\n‚Ä¢ Ansiedade e depress√£o\n‚Ä¢ Problemas digestivos\n\nüí∞ **Valores:**\n‚Ä¢ Particular: R$ 180,00/sess√£o\n‚Ä¢ Avalia√ß√£o: R$ 200,00 (obrigat√≥ria)\n‚Ä¢ Conv√™nios: R$ 140-160,00/sess√£o\n‚Ä¢ Pacote 10 sess√µes com desconto especial\n\n‚è±Ô∏è Dura√ß√£o: 45 minutos\n‚ö†Ô∏è Requer avalia√ß√£o pr√©via\n\nüìÖ Quer agendar?"
      }
    },
    {
      "id": "explicacao_rpg",
      "type": "MESSAGE",
      "position": { "x": 1000, "y": 770 },
      "data": {
        "message": "üßò **RPG - Reeduca√ß√£o Postural Global**\n\nüìñ **O que √©:**\nM√©todo terap√™utico que trabalha o corpo de forma global atrav√©s de posturas de alongamento ativo.\n\n‚ú® **Benef√≠cios:**\n‚Ä¢ Corre√ß√£o de desvios posturais\n‚Ä¢ Al√≠vio de dores na coluna\n‚Ä¢ Melhora da respira√ß√£o\n‚Ä¢ Aumento da flexibilidade\n‚Ä¢ Equil√≠brio muscular\n‚Ä¢ Consci√™ncia corporal\n\nüéØ **Indicado para:**\n‚Ä¢ Escoliose\n‚Ä¢ Hiperlordose/Hipercifose\n‚Ä¢ H√©rnias de disco\n‚Ä¢ Dores cr√¥nicas na coluna\n‚Ä¢ Problemas respirat√≥rios\n\nüí∞ **Valores:**\n‚Ä¢ Particular: R$ 100,00/sess√£o\n‚Ä¢ Conv√™nios: R$ 85-95,00/sess√£o\n‚Ä¢ Pacote 10 sess√µes dispon√≠vel\n\n‚è±Ô∏è Dura√ß√£o: 50 minutos\n\nüìÖ Quer agendar?"
      }
    },
    {
      "id": "check_patient",
      "type": "ACTION",
      "position": { "x": 1000, "y": 620 },
      "data": {
        "action": "search_patient_by_phone"
      }
    },
    {
      "id": "patient_exists",
      "type": "CONDITION",
      "position": { "x": 1000, "y": 750 },
      "data": {
        "condition": "patient_found"
      }
    },
    {
      "id": "msg_paciente_encontrado",
      "type": "MESSAGE",
      "position": { "x": 900, "y": 900 },
      "data": {
        "message": "‚úÖ Encontrei seu cadastro!\n\nüë§ ${paciente.nome}\nüí≥ Conv√™nio: ${paciente.convenio}\n\nVamos prosseguir com o agendamento!"
      }
    },
    {
      "id": "msg_solicita_cadastro",
      "type": "MESSAGE",
      "position": { "x": 1100, "y": 900 },
      "data": {
        "message": "üìù Vou precisar de alguns dados para seu cadastro.\n\nVamos come√ßar?"
      }
    },
    {
      "id": "collect_nome",
      "type": "DATA_COLLECTION",
      "position": { "x": 1100, "y": 1030 },
      "data": {
        "field": "name",
        "message": "Nome completo:"
      }
    },
    {
      "id": "collect_cpf",
      "type": "DATA_COLLECTION",
      "position": { "x": 1100, "y": 1160 },
      "data": {
        "field": "cpf",
        "message": "Agora, seu **CPF** (apenas n√∫meros):"
      }
    },
    {
      "id": "collect_nascimento",
      "type": "DATA_COLLECTION",
      "position": { "x": 1100, "y": 1290 },
      "data": {
        "field": "birth_date",
        "message": "Data de **nascimento** (DD/MM/AAAA):"
      }
    },
    {
      "id": "collect_email",
      "type": "DATA_COLLECTION",
      "position": { "x": 1100, "y": 1420 },
      "data": {
        "field": "email",
        "message": "Seu **e-mail**:"
      }
    },
    {
      "id": "collect_convenio",
      "type": "DATA_COLLECTION",
      "position": { "x": 1100, "y": 1550 },
      "data": {
        "field": "insurance",
        "message": "Qual seu **conv√™nio**?\n(ou digite 'particular' se for pagar particular)"
      }
    },
    {
      "id": "confirma_cadastro",
      "type": "MESSAGE",
      "position": { "x": 1100, "y": 1680 },
      "data": {
        "message": "üìã **Confirme seus dados:**\n\nüë§ Nome: ${paciente.nome}\nüìÑ CPF: ${paciente.cpf}\nüéÇ Nascimento: ${paciente.data_nascimento}\nüìß E-mail: ${paciente.email}\nüí≥ Conv√™nio: ${paciente.convenio}\nüì± Telefone: ${paciente.telefone}\n\n‚úÖ Est√° tudo correto?\n(responda 'sim' para confirmar ou 'n√£o' para corrigir)"
      }
    },
    {
      "id": "validate_confirmacao",
      "type": "CONDITION",
      "position": { "x": 1100, "y": 1810 },
      "data": {
        "condition": "sim|confirmar|correto|ok|yes|est√° certo|tudo certo"
      }
    },
    {
      "id": "create_patient",
      "type": "ACTION",
      "position": { "x": 1000, "y": 1940 },
      "data": {
        "action": "create_patient_profile"
      }
    },
    {
      "id": "msg_cadastro_sucesso",
      "type": "MESSAGE",
      "position": { "x": 1000, "y": 2070 },
      "data": {
        "message": "‚úÖ Cadastro realizado com sucesso!\n\nAgora vamos prosseguir com seu agendamento."
      }
    },
    {
      "id": "corrigir_cadastro",
      "type": "MESSAGE",
      "position": { "x": 1200, "y": 1940 },
      "data": {
        "message": "üìù Qual informa√ß√£o voc√™ gostaria de corrigir?\n\nDigite:\n1Ô∏è‚É£ Nome\n2Ô∏è‚É£ CPF\n3Ô∏è‚É£ Nascimento\n4Ô∏è‚É£ E-mail\n5Ô∏è‚É£ Conv√™nio"
      }
    },
    {
      "id": "ask_procedimentos",
      "type": "MESSAGE",
      "position": { "x": 950, "y": 2200 },
      "data": {
        "message": "ü©∫ **Escolha os procedimentos**\n\nVoc√™ pode escolher at√© 3 procedimentos para agendar.\n\nProcedimentos dispon√≠veis na ${unidade_nome}:\n${procedimentos_disponiveis}\n\nDigite o nome do **primeiro procedimento**:"
      }
    },
    {
      "id": "collect_proc_1",
      "type": "DATA_COLLECTION",
      "position": { "x": 950, "y": 2330 },
      "data": {
        "field": "procedure_1",
        "message": "Primeiro procedimento:"
      }
    },
    {
      "id": "ask_proc_2",
      "type": "MESSAGE",
      "position": { "x": 950, "y": 2460 },
      "data": {
        "message": "‚úÖ ${procedimento_1} anotado!\n\nDeseja adicionar um **segundo procedimento**?\n(responda 'sim' ou 'n√£o')"
      }
    },
    {
      "id": "condition_proc_2",
      "type": "CONDITION",
      "position": { "x": 950, "y": 2590 },
      "data": {
        "condition": "sim|quero|adicionar|segundo|mais"
      }
    },
    {
      "id": "collect_proc_2",
      "type": "DATA_COLLECTION",
      "position": { "x": 850, "y": 2720 },
      "data": {
        "field": "procedure_2",
        "message": "Segundo procedimento:"
      }
    },
    {
      "id": "ask_proc_3",
      "type": "MESSAGE",
      "position": { "x": 850, "y": 2850 },
      "data": {
        "message": "‚úÖ ${procedimento_2} anotado!\n\nDeseja adicionar um **terceiro procedimento**?\n(responda 'sim' ou 'n√£o')"
      }
    },
    {
      "id": "condition_proc_3",
      "type": "CONDITION",
      "position": { "x": 850, "y": 2980 },
      "data": {
        "condition": "sim|quero|adicionar|terceiro|mais"
      }
    },
    {
      "id": "collect_proc_3",
      "type": "DATA_COLLECTION",
      "position": { "x": 750, "y": 3110 },
      "data": {
        "field": "procedure_3",
        "message": "Terceiro procedimento:"
      }
    },
    {
      "id": "show_dates",
      "type": "MESSAGE",
      "position": { "x": 900, "y": 3240 },
      "data": {
        "message": "üìÖ **Escolha a data**\n\nDatas dispon√≠veis para agendamento:\n\n${datas_disponiveis}\n\nDigite a data desejada (ex: 15/12 ou 15/12/2024):"
      }
    },
    {
      "id": "collect_date",
      "type": "DATA_COLLECTION",
      "position": { "x": 900, "y": 3370 },
      "data": {
        "field": "preferred_date",
        "message": "Data desejada:"
      }
    },
    {
      "id": "ask_turno",
      "type": "MESSAGE",
      "position": { "x": 900, "y": 3500 },
      "data": {
        "message": "üïê **Escolha o turno**\n\nTurnos dispon√≠veis:\n\nüåÖ **Manh√£** (07:30 √†s 12:00)\nüå§Ô∏è **Tarde** (13:30 √†s 17:00)\nüåô **Noite** (17:00 √†s 19:30)\n\nDigite: manh√£, tarde ou noite"
      }
    },
    {
      "id": "collect_turno",
      "type": "DATA_COLLECTION",
      "position": { "x": 900, "y": 3630 },
      "data": {
        "field": "preferred_shift",
        "message": "Turno desejado:"
      }
    },
    {
      "id": "resumo_agendamento",
      "type": "MESSAGE",
      "position": { "x": 900, "y": 3760 },
      "data": {
        "message": "üìã **RESUMO DO PR√â-AGENDAMENTO**\n\nüè• **Unidade:** ${unidade_nome}\nüìç ${endereco}\n\nüë§ **Paciente:**\n‚Ä¢ Nome: ${paciente.nome}\n‚Ä¢ CPF: ${paciente.cpf}\n‚Ä¢ Conv√™nio: ${paciente.convenio}\n‚Ä¢ Telefone: ${paciente.telefone}\n\nü©∫ **Procedimentos:**\n1. ${procedimento_1}\n2. ${procedimento_2}\n3. ${procedimento_3}\n\nüìÖ **Data:** ${data_escolhida}\nüïê **Turno:** ${turno}\n\nüí° **Importante:**\n‚Ä¢ Chegue 15 minutos antes\n‚Ä¢ Traga documento com foto\n‚Ä¢ Traga carteirinha do conv√™nio (se aplic√°vel)\n\n‚úÖ **Confirmar agendamento?**\n(responda 'sim' para confirmar)"
      }
    },
    {
      "id": "confirma_agendamento",
      "type": "CONDITION",
      "position": { "x": 900, "y": 3890 },
      "data": {
        "condition": "sim|confirmar|agendar|ok"
      }
    },
    {
      "id": "create_appointment",
      "type": "ACTION",
      "position": { "x": 800, "y": 4020 },
      "data": {
        "action": "book_appointment"
      }
    },
    {
      "id": "fila_aguardando",
      "type": "MESSAGE",
      "position": { "x": 800, "y": 4150 },
      "data": {
        "message": "‚úÖ **PR√â-AGENDAMENTO REALIZADO COM SUCESSO!**\n\nüéØ Seu agendamento foi enviado para nossa equipe!\n\nüìå **Status:** AGUARDANDO CONFIRMA√á√ÉO\n\nüìû **Pr√≥ximos passos:**\nNossa equipe entrar√° em contato em at√© 2 horas √∫teis para:\n‚Ä¢ Confirmar disponibilidade\n‚Ä¢ Definir hor√°rio exato\n‚Ä¢ Passar orienta√ß√µes finais\n\nüì± **Voc√™ receber√°:**\n‚úÖ Liga√ß√£o de confirma√ß√£o\n‚úÖ SMS com detalhes\n‚úÖ E-mail com instru√ß√µes\n\nüí° **D√∫vidas?**\nLigue: ${telefone}\n\nObrigado por escolher ${unidade_nome}! üè•"
      }
    },
    {
      "id": "cancelar_agendamento",
      "type": "MESSAGE",
      "position": { "x": 1000, "y": 4020 },
      "data": {
        "message": "‚ùå Agendamento cancelado.\n\nSe quiser agendar depois, √© s√≥ falar comigo!\n\nPosso ajudar com mais alguma informa√ß√£o?"
      }
    },
    {
      "id": "end_success",
      "type": "END",
      "position": { "x": 800, "y": 4280 },
      "data": {
        "finalMessage": "At√© logo! Qualquer d√∫vida, estou aqui para ajudar! üëã"
      }
    },
    {
      "id": "transfer_human",
      "type": "TRANSFER_HUMAN",
      "position": { "x": 1300, "y": 620 },
      "data": {
        "finalMessage": "ü§ù **Transferindo para atendente humano...**\n\nAguarde um momento que nossa equipe j√° vai te atender!\n\nTempo m√©dio de espera: 2-5 minutos"
      }
    },
    {
      "id": "gpt_faq",
      "type": "GPT_RESPONSE",
      "position": { "x": 1100, "y": 450 },
      "data": {
        "systemPrompt": "Voc√™ √© um assistente de atendimento de cl√≠nica de fisioterapia. Responda perguntas gerais de forma educada e informativa sobre:\n- Hor√°rios de funcionamento\n- Formas de pagamento (aceitamos dinheiro, cart√£o, PIX)\n- Pol√≠tica de cancelamento (avisar com 24h de anteced√™ncia)\n- Documentos necess√°rios (RG, carteirinha do conv√™nio)\n- Como funciona primeira consulta\n- Tempo de sess√£o\n- D√∫vidas gerais\n\nSeja breve, claro e sempre termine perguntando se pode ajudar com mais alguma coisa."
      }
    }
  ],
  "edges": [
    {
      "id": "e_start_clinic",
      "source": "start",
      "target": "clinic_selection",
      "data": { "port": "main" }
    },
    {
      "id": "e_clinic_vieiralves",
      "source": "clinic_selection",
      "target": "unidade_vieiralves",
      "data": { "port": "true", "condition": "1|vieiralves" }
    },
    {
      "id": "e_clinic_sao_jose",
      "source": "clinic_selection",
      "target": "unidade_sao_jose",
      "data": { "port": "true", "condition": "2|s√£o jos√©|sao jose" }
    },
    {
      "id": "e_vieiralves_gpt",
      "source": "unidade_vieiralves",
      "target": "gpt_classifier",
      "data": { "port": "main" }
    },
    {
      "id": "e_sao_jose_gpt",
      "source": "unidade_sao_jose",
      "target": "gpt_classifier",
      "data": { "port": "main" }
    },
    {
      "id": "e_gpt_valores",
      "source": "gpt_classifier",
      "target": "branch_valores",
      "data": { "port": "1" }
    },
    {
      "id": "e_gpt_convenios",
      "source": "gpt_classifier",
      "target": "info_convenios",
      "data": { "port": "2" }
    },
    {
      "id": "e_gpt_localizacao",
      "source": "gpt_classifier",
      "target": "info_localizacao",
      "data": { "port": "3" }
    },
    {
      "id": "e_gpt_procedimento",
      "source": "gpt_classifier",
      "target": "info_procedimento_explicacao",
      "data": { "port": "4" }
    },
    {
      "id": "e_gpt_agendar",
      "source": "gpt_classifier",
      "target": "check_patient",
      "data": { "port": "5" }
    },
    {
      "id": "e_gpt_transfer",
      "source": "gpt_classifier",
      "target": "transfer_human",
      "data": { "port": "6" }
    },
    {
      "id": "e_branch_fisio_ortopedica",
      "source": "branch_valores",
      "target": "valor_fisio_ortopedica",
      "data": { "port": "main", "condition": "ortop√©dica|ortopedica" }
    },
    {
      "id": "e_branch_fisio_pelvica",
      "source": "branch_valores",
      "target": "valor_fisio_pelvica",
      "data": { "port": "main", "condition": "p√©lvica|pelvica" }
    },
    {
      "id": "e_branch_fisio_neurologica",
      "source": "branch_valores",
      "target": "valor_fisio_neurologica",
      "data": { "port": "main", "condition": "neurol√≥gica|neurologica" }
    },
    {
      "id": "e_branch_acupuntura",
      "source": "branch_valores",
      "target": "valor_acupuntura",
      "data": { "port": "main", "condition": "acupuntura" }
    },
    {
      "id": "e_branch_rpg",
      "source": "branch_valores",
      "target": "valor_rpg",
      "data": { "port": "main", "condition": "rpg" }
    },
    {
      "id": "e_branch_pilates",
      "source": "branch_valores",
      "target": "valor_pilates",
      "data": { "port": "main", "condition": "pilates" }
    },
    {
      "id": "e_branch_quiropraxia",
      "source": "branch_valores",
      "target": "valor_quiropraxia",
      "data": { "port": "main", "condition": "quiropraxia" }
    },
    {
      "id": "e_branch_consulta",
      "source": "branch_valores",
      "target": "valor_consulta",
      "data": { "port": "main", "condition": "consulta|ortopedista" }
    },
    {
      "id": "e_valor_ortopedica_gpt",
      "source": "valor_fisio_ortopedica",
      "target": "gpt_classifier",
      "data": { "port": "main" }
    },
    {
      "id": "e_valor_pelvica_gpt",
      "source": "valor_fisio_pelvica",
      "target": "gpt_classifier",
      "data": { "port": "main" }
    },
    {
      "id": "e_valor_neurologica_gpt",
      "source": "valor_fisio_neurologica",
      "target": "gpt_classifier",
      "data": { "port": "main" }
    },
    {
      "id": "e_valor_acupuntura_gpt",
      "source": "valor_acupuntura",
      "target": "gpt_classifier",
      "data": { "port": "main" }
    },
    {
      "id": "e_valor_rpg_gpt",
      "source": "valor_rpg",
      "target": "gpt_classifier",
      "data": { "port": "main" }
    },
    {
      "id": "e_valor_pilates_gpt",
      "source": "valor_pilates",
      "target": "gpt_classifier",
      "data": { "port": "main" }
    },
    {
      "id": "e_valor_quiropraxia_gpt",
      "source": "valor_quiropraxia",
      "target": "gpt_classifier",
      "data": { "port": "main" }
    },
    {
      "id": "e_valor_consulta_gpt",
      "source": "valor_consulta",
      "target": "gpt_classifier",
      "data": { "port": "main" }
    },
    {
      "id": "e_convenios_ask",
      "source": "info_convenios",
      "target": "ask_convenio_procedimentos",
      "data": { "port": "main" }
    },
    {
      "id": "e_ask_bradesco",
      "source": "ask_convenio_procedimentos",
      "target": "convenio_bradesco",
      "data": { "port": "main", "condition": "bradesco" }
    },
    {
      "id": "e_ask_sulamerica",
      "source": "ask_convenio_procedimentos",
      "target": "convenio_sulamerica",
      "data": { "port": "main", "condition": "sulamerica" }
    },
    {
      "id": "e_ask_outros",
      "source": "ask_convenio_procedimentos",
      "target": "convenio_outros",
      "data": { "port": "main", "condition": "outros" }
    },
    {
      "id": "e_convenio_bradesco_gpt",
      "source": "convenio_bradesco",
      "target": "gpt_classifier",
      "data": { "port": "main" }
    },
    {
      "id": "e_convenio_sulamerica_gpt",
      "source": "convenio_sulamerica",
      "target": "gpt_classifier",
      "data": { "port": "main" }
    },
    {
      "id": "e_convenio_outros_gpt",
      "source": "convenio_outros",
      "target": "gpt_classifier",
      "data": { "port": "main" }
    },
    {
      "id": "e_localizacao_gpt",
      "source": "info_localizacao",
      "target": "gpt_classifier",
      "data": { "port": "main" }
    },
    {
      "id": "e_explicacao_fisio_ortopedica",
      "source": "info_procedimento_explicacao",
      "target": "explicacao_fisio_ortopedica",
      "data": { "port": "main", "condition": "ortop√©dica|ortopedica" }
    },
    {
      "id": "e_explicacao_acupuntura",
      "source": "info_procedimento_explicacao",
      "target": "explicacao_acupuntura",
      "data": { "port": "main", "condition": "acupuntura" }
    },
    {
      "id": "e_explicacao_rpg",
      "source": "info_procedimento_explicacao",
      "target": "explicacao_rpg",
      "data": { "port": "main", "condition": "rpg" }
    },
    {
      "id": "e_info_faq",
      "source": "info_procedimento_explicacao",
      "target": "gpt_faq",
      "data": { "port": "false" }
    },
    {
      "id": "e_explicacao_ortopedica_gpt",
      "source": "explicacao_fisio_ortopedica",
      "target": "gpt_classifier",
      "data": { "port": "main" }
    },
    {
      "id": "e_explicacao_acupuntura_gpt",
      "source": "explicacao_acupuntura",
      "target": "gpt_classifier",
      "data": { "port": "main" }
    },
    {
      "id": "e_explicacao_rpg_gpt",
      "source": "explicacao_rpg",
      "target": "gpt_classifier",
      "data": { "port": "main" }
    },
    {
      "id": "e_faq_gpt",
      "source": "gpt_faq",
      "target": "gpt_classifier",
      "data": { "port": "main" }
    },
    {
      "id": "e_check_patient_condition",
      "source": "check_patient",
      "target": "patient_exists",
      "data": { "port": "main" }
    },
    {
      "id": "e_patient_found",
      "source": "patient_exists",
      "target": "msg_paciente_encontrado",
      "data": { "port": "true" }
    },
    {
      "id": "e_patient_not_found",
      "source": "patient_exists",
      "target": "msg_solicita_cadastro",
      "data": { "port": "false" }
    },
    {
      "id": "e_found_ask_proc",
      "source": "msg_paciente_encontrado",
      "target": "ask_procedimentos",
      "data": { "port": "main" }
    },
    {
      "id": "e_solicita_nome",
      "source": "msg_solicita_cadastro",
      "target": "collect_nome",
      "data": { "port": "main" }
    },
    {
      "id": "e_nome_cpf",
      "source": "collect_nome",
      "target": "collect_cpf",
      "data": { "port": "main" }
    },
    {
      "id": "e_cpf_nascimento",
      "source": "collect_cpf",
      "target": "collect_nascimento",
      "data": { "port": "main" }
    },
    {
      "id": "e_nascimento_email",
      "source": "collect_nascimento",
      "target": "collect_email",
      "data": { "port": "main" }
    },
    {
      "id": "e_email_convenio",
      "source": "collect_email",
      "target": "collect_convenio",
      "data": { "port": "main" }
    },
    {
      "id": "e_convenio_confirma",
      "source": "collect_convenio",
      "target": "confirma_cadastro",
      "data": { "port": "main" }
    },
    {
      "id": "e_confirma_validate",
      "source": "confirma_cadastro",
      "target": "validate_confirmacao",
      "data": { "port": "main" }
    },
    {
      "id": "e_validate_ok",
      "source": "validate_confirmacao",
      "target": "create_patient",
      "data": { "port": "true" }
    },
    {
      "id": "e_validate_corrigir",
      "source": "validate_confirmacao",
      "target": "corrigir_cadastro",
      "data": { "port": "false" }
    },
    {
      "id": "e_create_success",
      "source": "create_patient",
      "target": "msg_cadastro_sucesso",
      "data": { "port": "main" }
    },
    {
      "id": "e_success_ask_proc",
      "source": "msg_cadastro_sucesso",
      "target": "ask_procedimentos",
      "data": { "port": "main" }
    },
    {
      "id": "e_corrigir_nome",
      "source": "corrigir_cadastro",
      "target": "collect_nome",
      "data": { "port": "main" }
    },
    {
      "id": "e_ask_proc_1",
      "source": "ask_procedimentos",
      "target": "collect_proc_1",
      "data": { "port": "main" }
    },
    {
      "id": "e_proc1_ask2",
      "source": "collect_proc_1",
      "target": "ask_proc_2",
      "data": { "port": "main" }
    },
    {
      "id": "e_ask2_condition2",
      "source": "ask_proc_2",
      "target": "condition_proc_2",
      "data": { "port": "main" }
    },
    {
      "id": "e_condition2_yes",
      "source": "condition_proc_2",
      "target": "collect_proc_2",
      "data": { "port": "true" }
    },
    {
      "id": "e_condition2_no",
      "source": "condition_proc_2",
      "target": "show_dates",
      "data": { "port": "false" }
    },
    {
      "id": "e_proc2_ask3",
      "source": "collect_proc_2",
      "target": "ask_proc_3",
      "data": { "port": "main" }
    },
    {
      "id": "e_ask3_condition3",
      "source": "ask_proc_3",
      "target": "condition_proc_3",
      "data": { "port": "main" }
    },
    {
      "id": "e_condition3_yes",
      "source": "condition_proc_3",
      "target": "collect_proc_3",
      "data": { "port": "true" }
    },
    {
      "id": "e_condition3_no",
      "source": "condition_proc_3",
      "target": "show_dates",
      "data": { "port": "false" }
    },
    {
      "id": "e_proc3_dates",
      "source": "collect_proc_3",
      "target": "show_dates",
      "data": { "port": "main" }
    },
    {
      "id": "e_dates_collect",
      "source": "show_dates",
      "target": "collect_date",
      "data": { "port": "main" }
    },
    {
      "id": "e_date_turno",
      "source": "collect_date",
      "target": "ask_turno",
      "data": { "port": "main" }
    },
    {
      "id": "e_turno_collect",
      "source": "ask_turno",
      "target": "collect_turno",
      "data": { "port": "main" }
    },
    {
      "id": "e_turno_resumo",
      "source": "collect_turno",
      "target": "resumo_agendamento",
      "data": { "port": "main" }
    },
    {
      "id": "e_resumo_confirma",
      "source": "resumo_agendamento",
      "target": "confirma_agendamento",
      "data": { "port": "main" }
    },
    {
      "id": "e_confirma_create",
      "source": "confirma_agendamento",
      "target": "create_appointment",
      "data": { "port": "true" }
    },
    {
      "id": "e_confirma_cancel",
      "source": "confirma_agendamento",
      "target": "cancelar_agendamento",
      "data": { "port": "false" }
    },
    {
      "id": "e_create_fila",
      "source": "create_appointment",
      "target": "fila_aguardando",
      "data": { "port": "main" }
    },
    {
      "id": "e_fila_end",
      "source": "fila_aguardando",
      "target": "end_success",
      "data": { "port": "main" }
    },
    {
      "id": "e_cancel_gpt",
      "source": "cancelar_agendamento",
      "target": "gpt_classifier",
      "data": { "port": "main" }
    },
    {
      "id": "e_transfer_end",
      "source": "transfer_human",
      "target": "end_success",
      "data": { "port": "main" }
    }
  ]
}
